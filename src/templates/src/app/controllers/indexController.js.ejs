<% if (props.sucrase) { -%>
import fs from 'fs';
import path from 'path';
<% } else { -%>
const fs = require('fs');
const path = require('path');
<% } -%>

const controllerPath = path.resolve(__dirname);

const files = fs.readdirSync(controllerPath);

const controllers = {};

files.map(file => {
  if (file === 'index.js') return false;

  const controller = file.replace('.js', '');
  const controllerRequire = require('./' + controller);

  <% if (props.sucrase) { -%>
  Object.assign(controllers, { [controller]: controllerRequire.default });
  <% } else { -%>
  Object.assign(controllers, { [controller]: controllerRequire });
  <% } -%>

  return true;
});

<% if (props.sucrase) { -%>
export default controllers;
<% } else { -%>
module.exports = controllers;
<% } -%>
