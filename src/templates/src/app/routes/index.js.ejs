<% if (props.sucrase) { -%>
import { Router } from 'express';
import fs from 'fs';
import path from 'path';
<% } else { -%>
const { Router } = require('express');
const fs = require('fs');
const path = require('path');
<% } -%>

const routes = Router();

const routesPath = path.resolve(__dirname);

const files = fs.readdirSync(routesPath);

files.map(file => {
  if (file === 'index.js') return false;

  <% if (props.sucrase) { -%>
  routes.use(require(`./${file}`).default);
  <% } else { -%>
  routes.use(require(`./${file}`));
  <% } -%>

  return true;
});

<% if (props.sucrase) { -%>
export default routes;
<% } else { -%>
module.exports = routes;
<% } -%>
